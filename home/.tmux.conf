# ~/.tmux.conf

#### Prefix
unbind C-b
set -g prefix C-s
bind C-s send-prefix

#### General
set -g history-limit 10000
set -g base-index 1                # windows start at 1
set -g pane-base-index 1           # panes start at 1
setw -g automatic-rename off
set -g mouse on                     # enable mouse for pane selection/resize/scroll

#### Key bindings - easier pane navigation (vim style)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Split panes with easier keys
bind v split-window -h
bind - split-window -v

# Swap panes
bind < swap-pane -U
bind > swap-pane -D

# Resize panes (hold prefix then arrows)
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

#### Window / session shortcuts
bind c new-window
bind & kill-window
bind s choose-tree                     # session/window chooser
bind S command-prompt -p "session name:" "new-session -s '%%'"

# quick switch last two windows
bind Tab last-window

#### Copy mode (vi) and clipboard integration
setw -g mode-keys vi
bind -T copy-mode-vi v send -X begin-selection

# Switch between ubuntu / wsl
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "xclip -selection clipboard -in"
# bind -T copy-mode-vi y send -X copy-pipe-and-cancel "clip.exe"

# Use system clipboard:
# For WSL: recommend win32yank or clip.exe; for Linux: xclip/xsel
# Below attempts win32yank if available, falls back to xclip
set-option -g set-clipboard external
set-option -g mouse on
set-window-option -g mode-keys vi

# Bind a key to copy selection to system clipboard (prefix + Y)
bind Y run-shell "tmux save-buffer - | (command -v win32yank &>/dev/null && win32yank -i) || (command -v clip.exe &>/dev/null && clip.exe) || (command -v xclip &>/dev/null && xclip -selection clipboard -i) || (command -v pbcopy &>/dev/null && pbcopy) || true"

#### Statusline (minimal, informative)
set -g status-interval 5
set -g status-left-length 40
set -g status-right-length 150
set -g status-justify centre
set -g status-bg colour235
set -g status-fg colour136

set -g status-left "#[fg=colour46]#S #[fg=colour244]|"
set -g status-right "#[fg=colour244]%Y-%m-%d #[fg=colour39]%H:%M #[fg=colour244]| #(~/.tmux/cpu.sh 2>/dev/null || echo '')"

#### Reload config quickly (prefix + r)
bind r source-file ~/.tmux.conf \; display-message "tmux.conf reloaded"

#### Helpful small defaults
set -g allow-rename off
set -g visual-activity on
set -g bell-action none
setw -g aggressive-resize on

# End of file

